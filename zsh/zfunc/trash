trash() {
    TRASH_DIR="$HOME/.trash"

    if [[ ! -d "$TRASH_DIR" ]]
    then
        mkdir "$TRASH_DIR"
    fi

    $(mv "$@" "$TRASH_DIR")> /dev/null
    move_successful=$?

    targets=()

    # Get the name of the files / directories to delete.
    for arg in "$@"; do
        target=$(basename $arg)
        targets+=("$TRASH_DIR/$target")
    done

    if [[ $move_successful -ne 0 ]]; then
        rm -rf ${targets[@]}
        mv "$@" "$TRASH_DIR"
    fi
}
